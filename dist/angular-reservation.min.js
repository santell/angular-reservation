!function(){angular.module("hm.reservation",["ui.bootstrap","pascalprecht.translate"])}(),function(){function e(){var e={getAvailableHoursAPIUrl:"http://localhost:8080/API/getAvailableHours",reserveAPIUrl:"http://localhost:8080/API/reserve"};return{$get:function(){return e},set:function(r){angular.extend(e,r)}}}angular.module("hm.reservation").provider("reservationConfig",[e])}(),function(){function e(e,r,n){function t(n){var t=e.open({templateUrl:"confirmModal.html",size:"sm",controller:["name","selectedDate","selectedHour",a],controllerAs:"confirmModalCtrl",resolve:{name:function(){return n},selectedDate:function(){return r("date")(l.selectedDate,l.dateFormat)},selectedHour:function(){return l.selectedHour}}});t.result.then(function(){console.log("Accepted")},function(){console.log("Cancelled")})}function a(e,r,n){var t=this;t.translationParams={name:e,selectedDate:r,selectedHour:n}}function o(){var e={selectedDate:l.selectedDate};n.getAvailableHours(e).then(function(){var e=n.level;n.message;"SUCCESS"==e?console.log("Success"):"ERROR"==e?console.log("Error"):"SERVER_ERROR"==e?console.log("Internal server error"):"CONNECTION_ERROR"==e&&console.log("Connection error"),l.availableHours=["10:00","10.30","11.30","12.30","13.00","17.00","17.30","18.00","18.30","19.00"]})}var l=this;l.selectedTab=0,l.secondTabLocked=!0,l.thirdTabLocked=!0,l.selectedDate=new Date,l.selectedHour="",l.userData={},l.calendarOptions={minDate:new Date,showWeeks:!1},l.dateFormat="dd/MM/yyyy",l.onSelectDate=function(){l.secondTabLocked=!1,l.selectedTab=1,o()},l.selectHour=function(e){l.thirdTabLocked=!1,l.selectedHour=e,l.selectedTab=2},l.showConfirm=function(e){t(e)}}angular.module("hm.reservation").controller("ReservationCtrl",["$uibModal","$filter","reservationAPIFactory",e])}(),function(){angular.module("hm.reservation").directive("reservation",[function(){return{restrict:"E",controller:"ReservationCtrl",controllerAs:"reservationCtrl",templateUrl:"index.html"}}])}(),function(){function e(e,r){var n={};return n.level="",n.message="",n.getAvailableHours=function(t){return e({method:"POST",data:t,url:r.getAvailableHoursAPIUrl,responseType:"json"}).then(function(e){console.log(e.data),n.level=e.data.level,n.message=e.data.message},function(e){n.errorManagement(e.status)})},n.reserve=function(t){return e({method:"POST",data:t,url:r.reserveAPIUrl,responseType:"json"}).then(function(e){console.log(e.data),n.level=e.data.level,n.message=e.data.message},function(e){n.errorManagement(e.status)})},n.errorManagement=function(e){switch(e){case 500:n.level="SERVER_ERROR";break;default:n.level="CONNECTION_ERROR"}},n}angular.module("hm.reservation").factory("reservationAPIFactory",["$http","reservationConfig",e])}(),function(){"use strict";angular.module("hm.reservation").config(["$translateProvider",function(e){e.translations("es",{date:"Fecha",time:"Hora",client:"Cliente",name:"Nombre",save:"Guardar",cancel:"Cancelar",select:"Seleccionar",phone:"Teléfono",email:"Email",reserve:"Reservar",confirmOK:"Sí, reservar",confirmCancel:"No, cancelar",confirmTitle:"Confirmar reserva",confirmText:"{{name}}, ¿Estás seguro de que deseas reservar el día {{selectedDate}} a las {{selectedHour}}?."}),e.translations("en",{date:"Date",time:"Time",client:"Client",name:"Name",save:"Save",cancel:"Cancel",select:"Select",phone:"Phone",email:"Email",reserve:"Reserve",confirmOK:"Yes, reserve",confirmCancel:"No, cancel",confirmTitle:"Confirm reservation",confirmText:"{{name}}, Are you sure you want to reserve date {{selectedDate}} at {{selectedHour}}?."}),e.registerAvailableLanguageKeys(["es","en"],{"es_*":"es","en_*":"en"}),e.determinePreferredLanguage(),e.useSanitizeValueStrategy("escaped")}])}(),angular.module("hm.reservation").run(["$templateCache",function(e){e.put("confirmModal.html",'<div class="modal-header">\r\n    <h3 class="modal-title">{{"confirmTitle" | translate}}</h3>\r\n</div>\r\n<div class="modal-body">\r\n    <h5>{{"confirmText" | translate : confirmModalCtrl.translationParams}}</h5>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="btn btn-danger" type="button" ng-click="$dismiss()">{{"confirmCancel" | translate}}</button>\r\n    <button class="btn btn-success" type="button" ng-click="$close()">{{"confirmOK" | translate}}</button>\r\n</div>'),e.put("index.html",'<div>\r\n    <uib-tabset active="reservationCtrl.selectedTab" justified="true" style="border: 2px dotted gainsboro">\r\n        <uib-tab index="0">\r\n            <uib-tab-heading>\r\n                <span class="glyphicon glyphicon-calendar" aria-hidden="true" style="font-size: 18px"></span>\r\n                <h5 ng-if="reservationCtrl.secondTabLocked">{{"date" | translate}}</h5>\r\n                <h5 ng-if="!reservationCtrl.secondTabLocked">{{reservationCtrl.selectedDate | date: reservationCtrl.dateFormat}}</h5>\r\n            </uib-tab-heading>\r\n\r\n            <uib-datepicker ng-model="reservationCtrl.selectedDate" ng-change="reservationCtrl.onSelectDate()" datepicker-options="reservationCtrl.calendarOptions"></uib-datepicker>\r\n        </uib-tab>\r\n\r\n        <uib-tab index="1" disable="reservationCtrl.secondTabLocked">\r\n            <uib-tab-heading>\r\n                <span class="glyphicon glyphicon-time" aria-hidden="true" style="font-size: 18px"></span>\r\n                <h5 ng-if="reservationCtrl.thirdTabLocked">{{"time" | translate}}</h5>\r\n                <h5 ng-if="!reservationCtrl.thirdTabLocked">{{reservationCtrl.selectedHour}}</h5>\r\n            </uib-tab-heading>\r\n\r\n            <div class="list-group">\r\n                <a class="list-group-item" href="" ng-repeat="item in reservationCtrl.availableHours" ng-click="reservationCtrl.selectHour(item)" ng-class="{\'selected\': reservationCtrl.selectedHour == item}">\r\n                    {{item}}\r\n                </a>\r\n            </div>\r\n        </uib-tab>\r\n\r\n        <uib-tab index="2" disable="reservationCtrl.thirdTabLocked">\r\n            <uib-tab-heading>\r\n                <span class="glyphicon glyphicon-user" aria-hidden="true" style="font-size: 18px"></span>\r\n                <h5>{{"client" | translate}}</h5>\r\n            </uib-tab-heading>\r\n\r\n            <!-- TODO Add name model to showConfirm function -->\r\n            <form class="form-horizontal" name="reservationCtrl.reserveForm" ng-submit="reservationCtrl.reserveForm.$valid && reservationCtrl.showConfirm(\'Héctor\')" novalidate>\r\n                <fieldset>\r\n                    <div class="form-group col-md-12">\r\n                        <label class="col-md-4 control-label" for="name">{{"name" | translate}}</label>\r\n                        <div class="col-md-8">\r\n                            <div class="input-group">\r\n                                <span class="input-group-addon">\r\n                                    <span class="glyphicon glyphicon-user" aria-hidden="true" style="font-size: 14px"></span>\r\n                                </span>\r\n                                <input id="name" name="name" class="form-control" placeholder="{{\'name\' | translate}}" type="text" required>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group col-md-12">\r\n                        <label class="col-md-4 control-label" for="phone">{{"phone" | translate}}</label>\r\n                        <div class="col-md-8">\r\n                            <div class="input-group">\r\n                                <span class="input-group-addon">\r\n                                    <span class="glyphicon glyphicon-earphone" aria-hidden="true" style="font-size: 14px"></span>\r\n                                </span>\r\n                                <input id="phone" name="phone" class="form-control" placeholder="{{\'phone\' | translate}}" type="text" required>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group col-md-12">\r\n                        <label class="col-md-4 control-label" for="email">{{"email" | translate}}</label>\r\n                        <div class="col-md-8">\r\n                            <div class="input-group">\r\n                                <span class="input-group-addon">\r\n                                    <span class="glyphicon glyphicon-envelope" aria-hidden="true" style="font-size: 14px"></span>\r\n                                </span>\r\n                                <input id="email" name="email" class="form-control" placeholder="{{\'email\' | translate}}" type="text" required>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group">\r\n                        <div class="col-md-12">\r\n                            <button id="reserve" name="reserve" class="btn btn-success">{{"reserve" | translate}}</button>\r\n                        </div>\r\n                    </div>\r\n                </fieldset>\r\n            </form>\r\n        </uib-tab>\r\n    </uib-tabset>\r\n</div>')}]);