!function(){angular.module("angular.reservation",["ngMaterial","pascalprecht.translate"])}(),function(){function e(){var e={getAvailableHoursAPIUrl:"http://localhost:8080/API/getAvailableHours",reserveAPIUrl:"http://localhost:8080/API/reserve"};return{$get:function(){return e},set:function(r){angular.extend(e,r)}}}angular.module("angular.reservation").provider("reservationConfig",[e])}(),function(){function e(e,r,n){function t(){var e={selectedDate:o.selectedDate};n.getAvailableHours(e).then(function(){o.showLoader=!1;var e=n.level;n.message;"SUCCESS"==e?console.log("Success"):"ERROR"==e?console.log("Error"):"SERVER_ERROR"==e?console.log("Internal server error"):"CONNECTION_ERROR"==e&&console.log("Connection error"),o.availableHours=["10:00","10.30","11.30","12.30","13.00","17.00","17.30","18.00","18.30","19.00"]})}function a(){var e={selectedDate:o.selectedDate,selectedHour:o.selectedHour,userData:o.userData};n.reserve(e).then(function(){o.showLoader=!1;var e=n.level;n.message;"SUCCESS"==e?console.log("Success"):"ERROR"==e?console.log("Error"):"SERVER_ERROR"==e?console.log("Internal server error"):"CONNECTION_ERROR"==e&&console.log("Connection error")})}var o=this;o.selectedTab=0,o.secondTabLocked=!0,o.thirdTabLocked=!0,o.selectedDate=new Date,o.selectedHour="",o.userData={},o.showLoader=!1,o.onSelectDate=function(){o.showLoader=!0,o.secondTabLocked=!1,o.selectedTab=1,t()},o.selectHour=function(e){o.thirdTabLocked=!1,o.selectedHour=e,o.selectedTab=2},o.showConfirm=function(n){var t=r.confirm().title(e("translate")("confirmTitle")).textContent(e("translate")("confirmText",{name:o.userData.name,selectedDate:e("date")(o.selectedDate,"dd/MM/yyyy"),selectedHour:o.selectedHour})).ariaLabel(e("translate")("confirmTitle")).targetEvent(n).ok(e("translate")("confirmOK")).cancel(e("translate")("confirmCancel"));r.show(t).then(function(){o.showLoader=!0,a()},function(){console.log("Reservation cancelled")})}}angular.module("angular.reservation").controller("ReservationCtrl",["$filter","$mdDialog","reservationAPIFactory",e])}(),function(){angular.module("angular.reservation").directive("reservation",["$document","$compile",function(e,r){return{restrict:"E",controller:"ReservationCtrl",controllerAs:"reservationCtrl",templateUrl:"index.html"}}])}(),function(){function e(e,r){var n={};return n.level="",n.message="",n.getAvailableHours=function(t){return e({method:"POST",data:t,url:r.getAvailableHoursAPIUrl,responseType:"json"}).then(function(e){console.log(e.data),n.level=e.data.level,n.message=e.data.message},function(e){n.errorManagement(e.status)})},n.reserve=function(t){return e({method:"POST",data:t,url:r.reserveAPIUrl,responseType:"json"}).then(function(e){console.log(e.data),n.level=e.data.level,n.message=e.data.message},function(e){n.errorManagement(e.status)})},n.errorManagement=function(e){switch(e){case 500:n.level="SERVER_ERROR";break;default:n.level="CONNECTION_ERROR"}},n}angular.module("angular.reservation").factory("reservationAPIFactory",["$http","reservationConfig",e])}(),function(){"use strict";angular.module("angular.reservation").config(["$translateProvider",function(e){e.translations("es",{name:"Nombre",save:"Guardar",cancel:"Cancelar",select:"Seleccionar",phone:"Teléfono",email:"Email",reserve:"Reservar",confirmOK:"Sí, reservar",confirmCancel:"No, cancelar",confirmTitle:"Confirmar reserva",confirmText:"{{name}}, ¿Estás seguro de que deseas reservar el día {{selectedDate}} a las {{selectedHour}}?."}),e.translations("en",{name:"Name",save:"Save",cancel:"Cancel",select:"Select",phone:"Phone",email:"Email",reserve:"Reserve",confirmOK:"Yes, reserve",confirmCancel:"No, cancel",confirmTitle:"Confirm reservation",confirmText:"{{name}}, Are you sure you want to reserve date {{selectedDate}} at {{selectedHour}}?."}),e.registerAvailableLanguageKeys(["es","en"],{"es_*":"es","en_*":"en"}),e.determinePreferredLanguage(),e.useSanitizeValueStrategy("escaped")}])}(),angular.module("angular.reservation").run(["$templateCache",function(e){e.put("index.html",'<div class="tabs">\r\n    <md-content>\r\n        <md-tabs md-selected="reservationCtrl.selectedTab" md-center-tabs md-swipe-content md-dynamic-height md-border-bottom>\r\n            <md-tab>\r\n                <md-tab-label>\r\n                    <i class="material-icons" style="font-size: 36px">date_range</i>\r\n                </md-tab-label>\r\n\r\n                <md-tab-body>\r\n                    <md-calendar ng-model="reservationCtrl.selectedDate" ng-change="reservationCtrl.onSelectDate()"></md-calendar>\r\n                </md-tab-body>\r\n            </md-tab>\r\n\r\n            <md-tab ng-disabled="reservationCtrl.secondTabLocked">\r\n                <md-tab-label>\r\n                    <i class="material-icons" style="font-size: 36px">schedule</i>\r\n                </md-tab-label>\r\n\r\n                <md-tab-body>\r\n                    <md-content style="min-height: 60px">\r\n                        <md-progress-circular ng-show="reservationCtrl.showLoader" md-diameter="50" md-mode="indeterminate"></md-progress-circular>\r\n\r\n                        <md-list>\r\n                            <md-list-item class="md-1-line" ng-repeat="item in reservationCtrl.availableHours">\r\n                                <div class="md-list-item-text">\r\n                                    <h3>{{item}}</h3>\r\n                                </div>\r\n                                <md-button class="md-secondary" ng-click="reservationCtrl.selectHour(item)">{{"select" | translate}}</md-button>\r\n                                <md-divider ng-if="!$last"></md-divider>\r\n                            </md-list-item>\r\n                        </md-list>\r\n                    </md-content>\r\n                </md-tab-body>\r\n            </md-tab>\r\n\r\n            <md-tab ng-disabled="reservationCtrl.thirdTabLocked">\r\n                <md-tab-label>\r\n                    <i class="material-icons" style="font-size: 36px">person</i>\r\n                </md-tab-label>\r\n\r\n                <md-tab-body>\r\n                    <md-content style="min-height: 60px">\r\n                        <md-progress-circular ng-show="reservationCtrl.showLoader" md-diameter="50" md-mode="indeterminate"></md-progress-circular>\r\n\r\n                        <form name="reservationCtrl.reserveForm" ng-show="!reservationCtrl.showLoader" novalidate>\r\n                            <md-content class="md-no-momentum">\r\n                                <md-input-container class="md-icon-float md-block">\r\n                                    <label>{{"name" | translate}}</label>\r\n                                    <md-icon aria-label="person" class="material-icons">person</md-icon>\r\n                                    <input ng-model="reservationCtrl.userData.name" type="text" ng-required="true">\r\n                                </md-input-container>\r\n\r\n                                <md-input-container class="md-icon-float md-block">\r\n                                    <label>{{"phone" | translate}}</label>\r\n                                    <md-icon aria-label="person" class="material-icons">phone</md-icon>\r\n                                    <input ng-model="reservationCtrl.userData.phone" type="text" ng-required="true">\r\n                                </md-input-container>\r\n\r\n                                <md-input-container class="md-icon-float md-block">\r\n                                    <label>{{"email" | translate}}</label>\r\n                                    <md-icon aria-label="person" class="material-icons">email</md-icon>\r\n                                    <input ng-model="reservationCtrl.userData.email" type="email" ng-required="true">\r\n                                </md-input-container>\r\n                            </md-content>\r\n\r\n                            <section layout="row" layout-sm="column" layout-align="center center" layout-wrap="">\r\n                                <md-button type="button" ng-click="reservationCtrl.showConfirm($event)" ng-disabled="!reservationCtrl.reserveForm.$valid" class="md-raised md-primary">{{"reserve" | translate}}</md-button>\r\n                            </section>\r\n                        </form>\r\n                    </md-content>\r\n                </md-tab-body>\r\n            </md-tab>\r\n        </md-tabs>\r\n    </md-content>\r\n</div>')}]);